<phone:PhoneApplicationPage
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:phone="clr-namespace:Microsoft.Phone.Controls;assembly=Microsoft.Phone"
    xmlns:shell="clr-namespace:Microsoft.Phone.Shell;assembly=Microsoft.Phone"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:toolkit="clr-namespace:Microsoft.Phone.Controls;assembly=Microsoft.Phone.Controls.Toolkit"
    xmlns:controls="clr-namespace:Rayzit.Resources.Controls"
    xmlns:toolkitPrimitives="clr-namespace:Microsoft.Phone.Controls.Primitives;assembly=Microsoft.Phone.Controls.Toolkit"
    x:Class="Rayzit.MainPage"
    mc:Ignorable="d"
    SupportedOrientations="PortraitOrLandscape"  Orientation="Portrait"
    toolkit:TiltEffect.IsTiltEnabled="True"
    shell:SystemTray.IsVisible="True"
    shell:SystemTray.BackgroundColor="#FFEC3E23"
    shell:SystemTray.ForegroundColor="WhiteSmoke">

    <!--Resources-->
    <phone:PhoneApplicationPage.Resources>

        <ControlTemplate x:Key="StarButtonTemplate" TargetType="Button">
            <Border x:Name="Content" HorizontalAlignment="Stretch" VerticalAlignment="Stretch">
                <StackPanel Orientation="Horizontal" VerticalAlignment="Center" HorizontalAlignment="Center">
                    <Image Margin="0,0,5,0" Width="35" Height="35" Source="/Assets/list_icons/followersIcon.png"/>
                    <TextBlock FontSize="22" Text="{Binding IsStarred, Converter={StaticResource StarUnstarCm}}" Margin="0,4,0,0" Foreground="#B2363636"/>
                </StackPanel>
            </Border>
        </ControlTemplate>

        <ControlTemplate x:Key="ReRayzButtonTemplate" TargetType="Button">
            <Border x:Name="Content" HorizontalAlignment="Stretch" VerticalAlignment="Stretch">
                <StackPanel Orientation="Horizontal" VerticalAlignment="Center" HorizontalAlignment="Center">
                    <Image Margin="0,0,5,0" Width="35" Height="35" Source="/Assets/list_icons/rerayz_icon.png"/>
                    <TextBlock FontSize="22" Text="rerayz" Margin="0,4,0,0" Foreground="#B2363636" />
                </StackPanel>
            </Border>
        </ControlTemplate>

        <ControlTemplate x:Key="ShareButtonTemplate" TargetType="Button">
            <Border x:Name="Content" HorizontalAlignment="Stretch" VerticalAlignment="Stretch">
                <StackPanel Orientation="Horizontal" VerticalAlignment="Center" HorizontalAlignment="Center">
                    <Image Margin="0,0,5,0" Width="35" Height="35" Source="/Assets/list_icons/share_ico.png"/>
                    <TextBlock FontSize="22" Text="share" Margin="0,4,0,0" Foreground="#B2363636" />
                </StackPanel>
            </Border>
        </ControlTemplate>

        <!-- Data template for live rayz -->
        <DataTemplate x:Key="LiveRayzItemsTemplate">
            <Grid Margin="0,0,0,2">
                <Grid Margin="0,0,0,5">
                    <toolkit:ContextMenuService.ContextMenu>
                        <toolkit:ContextMenu Unloaded="ContextMenu_Unloaded" IsZoomEnabled="False">
                            <toolkit:MenuItem Header="remove" Click="HideRayz"/>
                            <toolkit:MenuItem Header="copy" Click="CopyToClipboard"/>
                            <toolkit:MenuItem Header="report" Click="ReportRayz" Visibility="{Binding IsMy, Converter={StaticResource ReportVisibilityConverter}}"/>

                        </toolkit:ContextMenu>
                    </toolkit:ContextMenuService.ContextMenu>

                    <Grid Margin="0,5,0,0">
                        <Grid>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                            </Grid.RowDefinitions>

                            <Border Grid.Row="0" Background="White" CornerRadius="3,3,0,0" BorderBrush="{Binding Status, Converter={StaticResource UnreadLineConverter}}" BorderThickness="0,0,0,3" Tap="LiveRayzListTap">

                                <Grid>
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="Auto"/>
                                        <RowDefinition Height="Auto"/>
                                        <RowDefinition Height="Auto"/>
                                        <RowDefinition Height="Auto"/>
                                    </Grid.RowDefinitions>

                                    <Border Grid.Row="0" VerticalAlignment="Top" HorizontalAlignment="Right" Height="25" Width="25" Background="{Binding Status, Converter={StaticResource UnreadLineConverter}}" CornerRadius="0,3,0,90"/>

                                    <Grid Grid.Row="0">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="50*"/>
                                            <ColumnDefinition Width="50*"/>
                                        </Grid.ColumnDefinitions>

                                        <Grid Grid.Column="0" VerticalAlignment="Top" HorizontalAlignment="Left">
                                            <TextBlock Margin="5,2,5,0" Text="{Binding RayzDate, Converter={StaticResource RDateConverter}}" FontSize="20" Foreground="{Binding RayzDate, Converter={StaticResource RDateConverterBG}}"/>
                                        </Grid>

                                        <Grid Grid.Column="1" Margin="0,0,30,0" VerticalAlignment="Center" HorizontalAlignment="Right">
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="Auto"/>
                                                <ColumnDefinition Width="Auto"/>
                                                <ColumnDefinition Width="Auto"/>
                                            </Grid.ColumnDefinitions>

                                            <Image Grid.Column="0" Width="30" Height="30" Source="/Assets/list_icons/attach_ico.png" Visibility="{Binding HasAttachments, Converter={StaticResource AttachmentConverter}}"/>

                                            <Grid Grid.Column="1" Visibility="{Binding UnreadRayzReplies, Converter={StaticResource NewMessageConverter}}" VerticalAlignment="Center" HorizontalAlignment="Center">
                                                <Image Width="30" Height="30" Source="/Assets/list_icons/unread_Bubble.png"/>
                                                <TextBlock Text="{Binding UnreadRayzReplies, Converter={StaticResource MaxRayzReplyBubble}}" TextWrapping="Wrap" Foreground="White" FontSize="16" TextAlignment="Center" Margin="0,6,0,0"/>
                                            </Grid>

                                            <Image Grid.Column="2" Width="30" Height="30" Source="/Assets/list_icons/reportIco.png" Visibility="{Binding ReportCount, Converter={StaticResource ReportConverter}}"/>
                                        </Grid>
                                    </Grid>


                                    <TextBlock Grid.Row="1" Margin="5,10,5,5" TextWrapping="Wrap" Text="{Binding RayzMessage}" FontSize="24" Foreground="{Binding UnreadRayzReplies, Converter={StaticResource ReadUnreadRayzConverter}}"/>

                                    <Grid Grid.Row="2" Margin="5,0,5,10">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="50*"/>
                                            <ColumnDefinition Width="50*"/>
                                        </Grid.ColumnDefinitions>

                                        <TextBlock Grid.Column="0" FontSize="14" Foreground="#B2363636">
        								    <Run Text="{Binding FollowersCount}"/>
        								    <Run Text="starred, "/>
        								    <Run Text="{Binding RerayzCount}"/>
        								    <Run Text="rerayz"/>
                                        </TextBlock>

                                        <StackPanel Grid.Column="1" Orientation="Horizontal" HorizontalAlignment="Right" VerticalAlignment="Center">
                                            <Image Source="/Assets/list_icons/distance_limitation.png" Margin="0,-4,5,0" Height="15" Width="15" VerticalAlignment="Center" Opacity="0.5"/>
                                            <TextBlock Text="{Binding MaxDistance, Converter={StaticResource RayzDistanceConverter}}" FontSize="14" Foreground="#B2363636" VerticalAlignment="Center"/>
                                        </StackPanel>
                                    </Grid>

                                    <ProgressBar Grid.Row="3" VerticalAlignment="Top" Visibility="{Binding RayzDate, Converter={StaticResource SendingProgressBarConverter}}" IsIndeterminate="True" Foreground="#EC3E23"/>
                                </Grid>
                            </Border>
                            <Border Grid.Row="1" Background="#FAFAFA" CornerRadius="0,0,3,3" Height="60" BorderBrush="#FF252525" BorderThickness="0,0,0,1">
                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="33*"/>
                                        <ColumnDefinition Width="33*"/>
                                        <!--<ColumnDefinition Width="33*"/>-->
                                    </Grid.ColumnDefinitions>

                                    <Button Grid.Column="0" Template="{StaticResource StarButtonTemplate}" Tap="StarRayz"/>
                                    <Border BorderThickness="0,0,1,0" Grid.Column="0" BorderBrush="#44363636" HorizontalAlignment="Right"/>

                                    <Button Grid.Column="1" Template="{StaticResource ReRayzButtonTemplate}" Click="ReRayz"/>
                                    <!--<Border BorderThickness="0,0,1,0" Grid.Column="1" BorderBrush="#44363636" HorizontalAlignment="Right"/>

                                    <Button Grid.Column="2" Template="{StaticResource ShareButtonTemplate}" Click="ShareRayz"/>-->
                                </Grid>
                            </Border>
                        </Grid>
                    </Grid>
                </Grid>
            </Grid>
        </DataTemplate>

        <!-- Data template for starred rayz -->
        <DataTemplate x:Key="StarredRayzItemsTemplate">
            <Grid Margin="0,0,25,2">
                <Grid Margin="0,0,0,5">
                    <toolkit:ContextMenuService.ContextMenu>
                        <toolkit:ContextMenu Unloaded="ContextMenu_Unloaded" IsZoomEnabled="False">
                            <toolkit:MenuItem Header="copy" Click="CopyToClipboard"/>
                        </toolkit:ContextMenu>
                    </toolkit:ContextMenuService.ContextMenu>

                    <Grid Margin="0,5,0,0">
                        <Grid>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                            </Grid.RowDefinitions>

                            <Border Grid.Row="0" Background="White" CornerRadius="3,3,0,0" BorderBrush="{Binding Status, Converter={StaticResource UnreadLineConverter}}" BorderThickness="0,0,0,3" Tap="StarredRayzTap">

                                <Grid>
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="Auto"/>
                                        <RowDefinition Height="Auto"/>
                                        <RowDefinition Height="Auto"/>
                                        <RowDefinition Height="Auto"/>
                                    </Grid.RowDefinitions>

                                    <Border Grid.Row="0" VerticalAlignment="Top" HorizontalAlignment="Right" Height="25" Width="25" Background="{Binding Status, Converter={StaticResource UnreadLineConverter}}" CornerRadius="0,3,0,90"/>

                                    <Grid Grid.Row="0">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="50*"/>
                                            <ColumnDefinition Width="50*"/>
                                        </Grid.ColumnDefinitions>

                                        <Grid Grid.Column="0" VerticalAlignment="Top" HorizontalAlignment="Left">
                                            <TextBlock Margin="5,2,5,0" Text="{Binding RayzDate, Converter={StaticResource RDateConverter}}" FontSize="20" Foreground="{Binding RayzDate, Converter={StaticResource RDateConverterBG}}"/>
                                        </Grid>

                                        <Grid Grid.Column="1" Margin="0,0,30,0" VerticalAlignment="Center" HorizontalAlignment="Right">
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="Auto"/>
                                                <ColumnDefinition Width="Auto"/>
                                                <ColumnDefinition Width="Auto"/>
                                            </Grid.ColumnDefinitions>

                                            <Image Grid.Column="0" Width="30" Height="30" Source="/Assets/list_icons/attach_ico.png" Visibility="{Binding HasAttachments, Converter={StaticResource AttachmentConverter}}"/>

                                            <Grid Grid.Column="1" Visibility="{Binding UnreadRayzReplies, Converter={StaticResource NewMessageConverter}}" VerticalAlignment="Center" HorizontalAlignment="Center">
                                                <Image Width="30" Height="30" Source="/Assets/list_icons/unread_Bubble.png"/>
                                                <TextBlock Text="{Binding UnreadRayzReplies, Converter={StaticResource MaxRayzReplyBubble}}" TextWrapping="Wrap" Foreground="White" FontSize="16" TextAlignment="Center" Margin="0,6,0,0"/>
                                            </Grid>

                                            <Image Grid.Column="2" Width="30" Height="30" Source="/Assets/list_icons/reportIco.png" Visibility="{Binding ReportCount, Converter={StaticResource ReportConverter}}"/>
                                        </Grid>
                                    </Grid>


                                    <TextBlock Grid.Row="1" Margin="5,10,5,5" TextWrapping="Wrap" Text="{Binding RayzMessage}" FontSize="24" Foreground="{Binding UnreadRayzReplies, Converter={StaticResource ReadUnreadRayzConverter}}"/>

                                    <Grid Grid.Row="2" Margin="5,0,5,10">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="50*"/>
                                            <ColumnDefinition Width="50*"/>
                                        </Grid.ColumnDefinitions>

                                        <TextBlock Grid.Column="0" FontSize="14" Foreground="#B2363636">
        								    <Run Text="{Binding FollowersCount}"/>
        								    <Run Text="starred, "/>
        								    <Run Text="{Binding RerayzCount}"/>
        								    <Run Text="rerayz"/>
                                        </TextBlock>

                                        <StackPanel Grid.Column="1" Orientation="Horizontal" HorizontalAlignment="Right" VerticalAlignment="Center">
                                            <Image Source="/Assets/list_icons/distance_limitation.png" Margin="0,-4,5,0" Height="15" Width="15" VerticalAlignment="Center" Opacity="0.5"/>
                                            <TextBlock Text="{Binding MaxDistance, Converter={StaticResource RayzDistanceConverter}}" FontSize="14" Foreground="#B2363636" VerticalAlignment="Center"/>
                                        </StackPanel>
                                    </Grid>

                                    <ProgressBar Grid.Row="3" VerticalAlignment="Top" Visibility="{Binding RayzDate, Converter={StaticResource SendingProgressBarConverter}}" IsIndeterminate="True" Foreground="#EC3E23"/>
                                </Grid>
                            </Border>
                            <Border Grid.Row="1" Background="#FAFAFA" CornerRadius="0,0,3,3" Height="60" BorderBrush="#FF252525" BorderThickness="0,0,0,1">
                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="33*"/>
                                        <ColumnDefinition Width="33*"/>
                                        <!--<ColumnDefinition Width="33*"/>-->
                                    </Grid.ColumnDefinitions>

                                    <Button Grid.Column="0" Template="{StaticResource StarButtonTemplate}" Tap="StarRayz"/>
                                    <Border BorderThickness="0,0,1,0" Grid.Column="0" BorderBrush="#44363636" HorizontalAlignment="Right"/>

                                    <Button Grid.Column="1" Template="{StaticResource ReRayzButtonTemplate}" Click="ReRayz"/>
                                    <!--<Border BorderThickness="0,0,1,0" Grid.Column="1" BorderBrush="#44363636" HorizontalAlignment="Right"/>

                                    <Button Grid.Column="2" Template="{StaticResource ShareButtonTemplate}" Click="ShareRayz"/>-->
                                </Grid>
                            </Border>
                        </Grid>
                    </Grid>
                </Grid>
            </Grid>
        </DataTemplate>

        <!-- Data template for my rayz -->
        <DataTemplate x:Key="MyRayzItemsTemplate">
            <Grid Margin="0,0,25,2">
                <Grid Margin="0,0,0,5">
                    <toolkit:ContextMenuService.ContextMenu>
                        <toolkit:ContextMenu Unloaded="ContextMenu_Unloaded" IsZoomEnabled="False">
                            <toolkit:MenuItem Header="remove" Click="DeleteRayz"/>
                            <toolkit:MenuItem Header="copy" Click="CopyToClipboard"/>
                        </toolkit:ContextMenu>
                    </toolkit:ContextMenuService.ContextMenu>

                    <Grid Margin="0,5,0,0">
                        <Grid>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                            </Grid.RowDefinitions>

                            <Border Grid.Row="0" Background="White" CornerRadius="3,3,0,0" BorderBrush="{Binding Status, Converter={StaticResource UnreadLineConverter}}" BorderThickness="0,0,0,3" Tap="MyRayzTap">

                                <Grid>
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="Auto"/>
                                        <RowDefinition Height="Auto"/>
                                        <RowDefinition Height="Auto"/>
                                        <RowDefinition Height="Auto"/>
                                    </Grid.RowDefinitions>

                                    <Border Grid.Row="0" VerticalAlignment="Top" HorizontalAlignment="Right" Height="25" Width="25" Background="{Binding Status, Converter={StaticResource UnreadLineConverter}}" CornerRadius="0,3,0,90"/>

                                    <Grid Grid.Row="0">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="50*"/>
                                            <ColumnDefinition Width="50*"/>
                                        </Grid.ColumnDefinitions>

                                        <Grid Grid.Column="0" VerticalAlignment="Top" HorizontalAlignment="Left">
                                            <TextBlock Margin="5,2,5,0" Text="{Binding RayzDate, Converter={StaticResource RDateConverter}}" FontSize="20" Foreground="{Binding RayzDate, Converter={StaticResource RDateConverterBG}}"/>
                                        </Grid>

                                        <Grid Grid.Column="1" Margin="0,0,30,0" VerticalAlignment="Center" HorizontalAlignment="Right">
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="Auto"/>
                                                <ColumnDefinition Width="Auto"/>
                                                <ColumnDefinition Width="Auto"/>
                                            </Grid.ColumnDefinitions>

                                            <Image Grid.Column="0" Width="30" Height="30" Source="/Assets/list_icons/attach_ico.png" Visibility="{Binding HasAttachments, Converter={StaticResource AttachmentConverter}}"/>

                                            <Grid Grid.Column="1" Visibility="{Binding UnreadRayzReplies, Converter={StaticResource NewMessageConverter}}" VerticalAlignment="Center" HorizontalAlignment="Center">
                                                <Image Width="30" Height="30" Source="/Assets/list_icons/unread_Bubble.png"/>
                                                <TextBlock Text="{Binding UnreadRayzReplies, Converter={StaticResource MaxRayzReplyBubble}}" TextWrapping="Wrap" Foreground="White" FontSize="16" TextAlignment="Center" Margin="0,6,0,0"/>
                                            </Grid>

                                            <Image Grid.Column="2" Width="30" Height="30" Source="/Assets/list_icons/reportIco.png" Visibility="{Binding ReportCount, Converter={StaticResource ReportConverter}}"/>
                                        </Grid>
                                    </Grid>


                                    <TextBlock Grid.Row="1" Margin="5,10,5,5" TextWrapping="Wrap" Text="{Binding RayzMessage}" FontSize="24" Foreground="{Binding UnreadRayzReplies, Converter={StaticResource ReadUnreadRayzConverter}}"/>

                                    <Grid Grid.Row="2" Margin="5,0,5,10">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="50*"/>
                                            <ColumnDefinition Width="50*"/>
                                        </Grid.ColumnDefinitions>

                                        <TextBlock Grid.Column="0" FontSize="14" Foreground="#B2363636">
        								    <Run Text="{Binding FollowersCount}"/>
        								    <Run Text="starred, "/>
        								    <Run Text="{Binding RerayzCount}"/>
        								    <Run Text="rerayz"/>
                                        </TextBlock>

                                        <StackPanel Grid.Column="1" Orientation="Horizontal" HorizontalAlignment="Right" VerticalAlignment="Center">
                                            <Image Source="/Assets/list_icons/distance_limitation.png" Margin="0,-4,5,0" Height="15" Width="15" VerticalAlignment="Center" Opacity="0.5"/>
                                            <TextBlock Text="{Binding MaxDistance, Converter={StaticResource RayzDistanceConverter}}" FontSize="14" Foreground="#B2363636" VerticalAlignment="Center"/>
                                        </StackPanel>
                                    </Grid>

                                    <ProgressBar Grid.Row="3" VerticalAlignment="Top" Visibility="{Binding RayzDate, Converter={StaticResource SendingProgressBarConverter}}" IsIndeterminate="True" Foreground="#EC3E23"/>
                                </Grid>
                            </Border>
                            <Border Grid.Row="1" Background="#FAFAFA" CornerRadius="0,0,3,3" Height="60" BorderBrush="#FF252525" BorderThickness="0,0,0,1">
                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="33*"/>
                                        <ColumnDefinition Width="33*"/>
                                        <!--<ColumnDefinition Width="33*"/>-->
                                    </Grid.ColumnDefinitions>

                                    <Button Grid.Column="0" Template="{StaticResource StarButtonTemplate}" Tap="StarRayz"/>
                                    <Border BorderThickness="0,0,1,0" Grid.Column="0" BorderBrush="#44363636" HorizontalAlignment="Right"/>

                                    <Button Grid.Column="1" Template="{StaticResource ReRayzButtonTemplate}" Click="ReRayz"/>
                                    <!--<Border BorderThickness="0,0,1,0" Grid.Column="1" BorderBrush="#44363636" HorizontalAlignment="Right"/>

                                    <Button Grid.Column="2" Template="{StaticResource ShareButtonTemplate}" Click="ShareRayz"/>-->
                                </Grid>
                            </Border>
                        </Grid>
                    </Grid>
                </Grid>
            </Grid>
        </DataTemplate>

        <!-- END -->

        <shell:ApplicationBar x:Key="BeamsArroundAppBar" IsMenuEnabled="True" Mode="Default" BackgroundColor="#404041" ForegroundColor="White">
            <shell:ApplicationBar.MenuItems>
                <shell:ApplicationBarMenuItem Text="settings" Click="Settings_Click"/>
                <shell:ApplicationBarMenuItem Text="help" Click="Help_Click"/>
                <shell:ApplicationBarMenuItem Text="intro video" Click="PlayIntroVideo_OnClick"/>
                <shell:ApplicationBarMenuItem Text="rate &amp; review" Click="RateReview_Click"/>
                <shell:ApplicationBarMenuItem Text="about" Click="About_Click"/>
            </shell:ApplicationBar.MenuItems>
            <shell:ApplicationBarIconButton 
        		Text="new rayz" 
        		x:Name="NewRayzAppBarButton" 
        		Click="NewRayzAppBarButton_Click" 
        		IconUri="/Assets/AppBar/add.png"/>
            <shell:ApplicationBarIconButton 
        		Text="refresh" 
        		x:Name="RefreshRayzAppBarButton" 
        		Click="Live_RefreshTapped" 
        		IconUri="/Assets/AppBar/refresh.png"/>
            <shell:ApplicationBarIconButton 
        		Text="find" 
        		x:Name="FilterBeamsAppBarButton" 
        		Click="FilterBeamsFeedAppBarButton_Click" 
        		IconUri="/Assets/AppBar/feature.search.png"/>
        </shell:ApplicationBar>

        <shell:ApplicationBar x:Key="FavoritesAppBar" IsMenuEnabled="True" Mode="Default" BackgroundColor="#404041" ForegroundColor="White">
            <shell:ApplicationBar.MenuItems>
                <shell:ApplicationBarMenuItem Text="settings" Click="Settings_Click"/>
                <shell:ApplicationBarMenuItem Text="help" Click="Help_Click"/>
                <shell:ApplicationBarMenuItem Text="intro video" Click="PlayIntroVideo_OnClick"/>
                <shell:ApplicationBarMenuItem Text="rate &amp; review" Click="RateReview_Click"/>
                <shell:ApplicationBarMenuItem Text="about" Click="About_Click"/>
            </shell:ApplicationBar.MenuItems>
            <shell:ApplicationBarIconButton 
        		Text="new rayz" 
        		x:Name="NewRayz2AppBarButton" 
        		Click="NewRayzAppBarButton_Click" 
        		IconUri="/Assets/AppBar/add.png"/>
            <shell:ApplicationBarIconButton 
        		Text="refresh" 
        		x:Name="RefreshStarredButton" 
        		Click="StarredMy_RefreshTapped"
        		IconUri="/Assets/AppBar/refresh.png"/>
            <shell:ApplicationBarIconButton 
        		Text="select" 
        		x:Name="SelectBeamsFavoritesAppBarrButton" 
        		Click="SelectBeamsFavoritesAppBar_Click" 
        		IconUri="/Toolkit.Content/ApplicationBar.Select.png"/>
        </shell:ApplicationBar>

        <shell:ApplicationBar x:Key="FavoritesDeleteAppBar" IsMenuEnabled="True" Mode="Default" BackgroundColor="#404041" ForegroundColor="White">
            <shell:ApplicationBar.MenuItems>
                <shell:ApplicationBarMenuItem Text="settings" Click="Settings_Click"/>
                <shell:ApplicationBarMenuItem Text="help" Click="Help_Click"/>
                <shell:ApplicationBarMenuItem Text="intro video" Click="PlayIntroVideo_OnClick"/>
                <shell:ApplicationBarMenuItem Text="rate &amp; review" Click="RateReview_Click"/>
                <shell:ApplicationBarMenuItem Text="about" Click="About_Click"/>
            </shell:ApplicationBar.MenuItems>
            <shell:ApplicationBarIconButton 
        		Text="select all"
        		Click="SelectAllBeamsFavoritesAppBar_Click" 
        		IconUri="/Assets/AppBar/check.png"/>
            <shell:ApplicationBarIconButton 
        		Text="delete"
        		IsEnabled="False"
        		x:Name="DeleteBeamsFavoriteAppBarButton" 
        		Click="DeleteBeamsFavoriteAppBarButton_Click" 
        		IconUri="/Assets/AppBar/favs.removefrom.png"/>
        </shell:ApplicationBar>

        <shell:ApplicationBar x:Key="MyBeamsAppBar" IsMenuEnabled="True" Mode="Default" BackgroundColor="#404041" ForegroundColor="White">
            <shell:ApplicationBar.MenuItems>
                <shell:ApplicationBarMenuItem Text="settings" Click="Settings_Click"/>
                <shell:ApplicationBarMenuItem Text="help" Click="Help_Click"/>
                <shell:ApplicationBarMenuItem Text="intro video" Click="PlayIntroVideo_OnClick"/>
                <shell:ApplicationBarMenuItem Text="rate &amp; review" Click="RateReview_Click"/>
                <shell:ApplicationBarMenuItem Text="about" Click="About_Click"/>
            </shell:ApplicationBar.MenuItems>
            <shell:ApplicationBarIconButton 
        		Text="new rayz" 
        		x:Name="NewRayz3AppBarButton" 
        		Click="NewRayzAppBarButton_Click" 
        		IconUri="/Assets/AppBar/add.png"/>
            <shell:ApplicationBarIconButton 
        		Text="refresh" 
        		x:Name="RefreshMyBeamsAppBarButton" 
        		Click="StarredMy_RefreshTapped" 
        		IconUri="/Assets/AppBar/refresh.png"/>
            <shell:ApplicationBarIconButton 
        		Text="select" 
        		x:Name="SelectBeamsInboxAppBarButton" 
        		Click="SelectBeamsInboxAppBarButton_Click" 
        		IconUri="/Toolkit.Content/ApplicationBar.Select.png"/>
        </shell:ApplicationBar>

        <shell:ApplicationBar x:Key="MyBeamsDeleteAppBar" IsMenuEnabled="True" Mode="Default" BackgroundColor="#404041" ForegroundColor="White">
            <shell:ApplicationBar.MenuItems>
                <shell:ApplicationBarMenuItem Text="settings" Click="Settings_Click"/>
                <shell:ApplicationBarMenuItem Text="help" Click="Help_Click"/>
                <shell:ApplicationBarMenuItem Text="intro video" Click="PlayIntroVideo_OnClick"/>
                <shell:ApplicationBarMenuItem Text="rate &amp; review" Click="RateReview_Click"/>
                <shell:ApplicationBarMenuItem Text="about" Click="About_Click"/>
            </shell:ApplicationBar.MenuItems>
            <shell:ApplicationBarIconButton 
        		Text="select all"
        		Click="SelectAllBeamsInboxAppBarButton_Click" 
        		IconUri="/Assets/AppBar/check.png"/>
            <shell:ApplicationBarIconButton 
        		Text="delete" 
        		IsEnabled="False" 
        		x:Name="DeleteBeamsInboxAppBarButton" 
        		Click="DeleteBeamsInboxAppBarButton_Click" 
        		IconUri="/Toolkit.Content/ApplicationBar.Delete.png"/>
        </shell:ApplicationBar>

        <Style x:Key="ListBoxItemStyle" TargetType="ListBoxItem">
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="BorderBrush" Value="Transparent"/>
            <Setter Property="Padding" Value="0"/>
            <Setter Property="HorizontalContentAlignment" Value="Center"/>
            <Setter Property="VerticalContentAlignment" Value="Center"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="ListBoxItem">
                        <Border x:Name="LayoutRoot" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}" Background="{TemplateBinding Background}" HorizontalAlignment="{TemplateBinding HorizontalAlignment}" VerticalAlignment="{TemplateBinding VerticalAlignment}">
                            <VisualStateManager.VisualStateGroups>
                                <VisualStateGroup x:Name="CommonStates">
                                    <VisualState x:Name="Normal"/>
                                    <VisualState x:Name="MouseOver"/>
                                </VisualStateGroup>
                                <VisualStateGroup x:Name="SelectionStates">
                                    <VisualState x:Name="Unselected">
                                        <Storyboard>
                                            <ColorAnimation Duration="0" To="#7FFFFFFF" Storyboard.TargetProperty="(Control.Background).(SolidColorBrush.Color)" Storyboard.TargetName="ContentContainer" d:IsOptimized="True"/>
                                            <ColorAnimation Duration="0" To="#7FFFFFFF" Storyboard.TargetProperty="(Control.Foreground).(SolidColorBrush.Color)" Storyboard.TargetName="ContentContainer" d:IsOptimized="True"/>
                                        </Storyboard>
                                    </VisualState>
                                    <VisualState x:Name="Selected">
                                        <Storyboard>
                                            <ColorAnimation Duration="0" To="White" Storyboard.TargetProperty="(Control.Foreground).(SolidColorBrush.Color)" Storyboard.TargetName="ContentContainer" d:IsOptimized="True"/>
                                        </Storyboard>
                                    </VisualState>
                                    <VisualState x:Name="SelectedUnfocused">
                                        <Storyboard>
                                            <ColorAnimation Duration="0" To="White" Storyboard.TargetProperty="(Control.Foreground).(SolidColorBrush.Color)" Storyboard.TargetName="ContentContainer" d:IsOptimized="True"/>
                                        </Storyboard>
                                    </VisualState>
                                </VisualStateGroup>
                            </VisualStateManager.VisualStateGroups>
                            <ContentControl x:Name="ContentContainer" ContentTemplate="{TemplateBinding ContentTemplate}" Content="{TemplateBinding Content}" HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}" Margin="{TemplateBinding Padding}" VerticalAlignment="{TemplateBinding VerticalContentAlignment}" Background="Black" BorderBrush="Black"/>
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <Style x:Key="LongListMultiSelectorItemListStyle" TargetType="toolkit:LongListMultiSelectorItem">
            <Setter Property="Background" Value="{StaticResource PhoneAccentBrush}"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="toolkit:LongListMultiSelectorItem">
                        <Grid MinHeight="52">
                            <Grid.Resources>
                                <ExponentialEase EasingMode="EaseIn" Exponent="8" x:Key="ExponentialEaseIn"/>
                                <QuadraticEase EasingMode="EaseOut" x:Key="QuadraticEaseOut"/>
                            </Grid.Resources>
                            <VisualStateManager.VisualStateGroups>
                                <VisualStateGroup x:Name="SelectionEnabledStates">
                                    <VisualStateGroup.Transitions>
                                        <VisualTransition x:Name="ClosedToExposed" 
    										From="Closed" To="Exposed"
    										GeneratedDuration="0:0:0.30">
                                            <Storyboard>
                                                <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.Opacity)" 
    												Storyboard.TargetName="OuterHintPanel">
                                                    <EasingDoubleKeyFrame KeyTime="0:0:0.0" Value="0.0" EasingFunction="{StaticResource QuadraticEaseOut}"/>
                                                    <EasingDoubleKeyFrame KeyTime="0:0:0.30" Value="1.0" EasingFunction="{StaticResource QuadraticEaseOut}"/>
                                                </DoubleAnimationUsingKeyFrames>
                                            </Storyboard>
                                        </VisualTransition>
                                        <VisualTransition x:Name="ExposedToClosed" 
    										From="Exposed" To="Closed"
    										GeneratedDuration="0:0:0.30">
                                            <Storyboard>
                                                <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.Opacity)" 
    												Storyboard.TargetName="OuterHintPanel">
                                                    <EasingDoubleKeyFrame KeyTime="0:0:0.0" Value="1.0" EasingFunction="{StaticResource QuadraticEaseOut}"/>
                                                    <EasingDoubleKeyFrame KeyTime="0:0:0.30" Value="0.0" EasingFunction="{StaticResource QuadraticEaseOut}"/>
                                                </DoubleAnimationUsingKeyFrames>
                                            </Storyboard>
                                        </VisualTransition>
                                        <VisualTransition x:Name="ExposedToOpened"
    										From="Exposed" To="Opened"
    										GeneratedDuration="0:0:0.30">
                                            <Storyboard>
                                                <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.RenderTransform).(CompositeTransform.TranslateX)" 
    												Storyboard.TargetName="SelectBox">
                                                    <EasingDoubleKeyFrame KeyTime="0:0:0.0" Value="-58" EasingFunction="{StaticResource ExponentialEaseIn}"/>
                                                    <EasingDoubleKeyFrame KeyTime="0:0:0.15" Value="0" EasingFunction="{StaticResource ExponentialEaseIn}"/>
                                                </DoubleAnimationUsingKeyFrames>
                                                <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.RenderTransform).(CompositeTransform.TranslateX)" 
    												Storyboard.TargetName="Presenter">
                                                    <EasingDoubleKeyFrame KeyTime="0:0:0.0" Value="24" EasingFunction="{StaticResource ExponentialEaseIn}"/>
                                                    <EasingDoubleKeyFrame KeyTime="0:0:0.15" Value="86" EasingFunction="{StaticResource ExponentialEaseIn}"/>
                                                </DoubleAnimationUsingKeyFrames>
                                                <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.Opacity)" 
    												Storyboard.TargetName="OuterHintPanel">
                                                    <EasingDoubleKeyFrame KeyTime="0:0:0.0" Value="1.0" EasingFunction="{StaticResource QuadraticEaseOut}"/>
                                                    <EasingDoubleKeyFrame KeyTime="0:0:0.30" Value="0.0" EasingFunction="{StaticResource QuadraticEaseOut}"/>
                                                </DoubleAnimationUsingKeyFrames>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.Visibility)" 
    												Storyboard.TargetName="SelectBox">
                                                    <DiscreteObjectKeyFrame KeyTime="0:0:0.0" Value="Visible"/>
                                                </ObjectAnimationUsingKeyFrames>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.IsHitTestVisible)" 
    												Storyboard.TargetName="OuterHintPanel">
                                                    <DiscreteObjectKeyFrame KeyTime="0:0:0" Value="False"/>
                                                </ObjectAnimationUsingKeyFrames>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.IsHitTestVisible)" 
    												Storyboard.TargetName="InnerHintPanel">
                                                    <DiscreteObjectKeyFrame KeyTime="0:0:0" Value="False"/>
                                                </ObjectAnimationUsingKeyFrames>
                                            </Storyboard>
                                        </VisualTransition>
                                        <VisualTransition x:Name="ClosedToOpened"
    										From="Closed" To="Opened"
    										GeneratedDuration="0:0:0.15">
                                            <Storyboard>
                                                <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.RenderTransform).(CompositeTransform.TranslateX)" 
    												Storyboard.TargetName="SelectBox">
                                                    <EasingDoubleKeyFrame KeyTime="0:0:0.0" Value="-58" EasingFunction="{StaticResource ExponentialEaseIn}"/>
                                                    <EasingDoubleKeyFrame KeyTime="0:0:0.15" Value="0" EasingFunction="{StaticResource ExponentialEaseIn}"/>
                                                </DoubleAnimationUsingKeyFrames>
                                                <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.RenderTransform).(CompositeTransform.TranslateX)" 
    												Storyboard.TargetName="Presenter">
                                                    <EasingDoubleKeyFrame KeyTime="0:0:0.0" Value="24" EasingFunction="{StaticResource ExponentialEaseIn}"/>
                                                    <EasingDoubleKeyFrame KeyTime="0:0:0.15" Value="86" EasingFunction="{StaticResource ExponentialEaseIn}"/>
                                                </DoubleAnimationUsingKeyFrames>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.Visibility)" 
    												Storyboard.TargetName="SelectBox">
                                                    <DiscreteObjectKeyFrame KeyTime="0:0:0.0" Value="Visible"/>
                                                </ObjectAnimationUsingKeyFrames>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.IsHitTestVisible)" 
    												Storyboard.TargetName="OuterHintPanel">
                                                    <DiscreteObjectKeyFrame KeyTime="0:0:0" Value="False"/>
                                                </ObjectAnimationUsingKeyFrames>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.IsHitTestVisible)" 
    												Storyboard.TargetName="InnerHintPanel">
                                                    <DiscreteObjectKeyFrame KeyTime="0:0:0" Value="False"/>
                                                </ObjectAnimationUsingKeyFrames>
                                            </Storyboard>
                                        </VisualTransition>
                                        <VisualTransition x:Name="OpenedToClosed"
    										From="Opened" To="Closed"
    										GeneratedDuration="0:0:0.15">
                                            <Storyboard>
                                                <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.RenderTransform).(CompositeTransform.TranslateX)" 
    												Storyboard.TargetName="SelectBox">
                                                    <EasingDoubleKeyFrame KeyTime="0:0:0.0" Value="0" EasingFunction="{StaticResource ExponentialEaseIn}"/>
                                                    <EasingDoubleKeyFrame KeyTime="0:0:0.15" Value="-58" EasingFunction="{StaticResource ExponentialEaseIn}"/>
                                                </DoubleAnimationUsingKeyFrames>
                                                <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.RenderTransform).(CompositeTransform.TranslateX)" 
    												Storyboard.TargetName="Presenter">
                                                    <EasingDoubleKeyFrame KeyTime="0:0:0.0" Value="86" EasingFunction="{StaticResource ExponentialEaseIn}"/>
                                                    <EasingDoubleKeyFrame KeyTime="0:0:0.15" Value="24" EasingFunction="{StaticResource ExponentialEaseIn}"/>
                                                </DoubleAnimationUsingKeyFrames>
                                                <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.Visibility)" 
    												Storyboard.TargetName="SelectBox">
                                                    <DiscreteObjectKeyFrame KeyTime="0:0:0.15" Value="Collapsed"/>
                                                </ObjectAnimationUsingKeyFrames>
                                            </Storyboard>
                                        </VisualTransition>
                                    </VisualStateGroup.Transitions>
                                    <VisualState x:Name="Closed"/>
                                    <VisualState x:Name="Exposed">
                                        <Storyboard>
                                            <DoubleAnimation Storyboard.TargetProperty="(UIElement.Opacity)" 
    											Storyboard.TargetName="OuterHintPanel"
    											Duration="0" To="1.0"/>
                                        </Storyboard>
                                    </VisualState>
                                    <VisualState x:Name="Opened">
                                        <Storyboard>
                                            <DoubleAnimation Storyboard.TargetProperty="(UIElement.RenderTransform).(CompositeTransform.TranslateX)" 
    											Storyboard.TargetName="SelectBox"
    											Duration="0" To="0"/>
                                            <DoubleAnimation Storyboard.TargetProperty="(UIElement.RenderTransform).(CompositeTransform.TranslateX)" 
    											Storyboard.TargetName="Presenter"
    											Duration="0" To="86"/>
                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.Visibility)" 
    											Storyboard.TargetName="SelectBox">
                                                <DiscreteObjectKeyFrame KeyTime="0:0:0" Value="Visible"/>
                                            </ObjectAnimationUsingKeyFrames>
                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.Visibility)" 
    											Storyboard.TargetName="OuterCover">
                                                <DiscreteObjectKeyFrame KeyTime="0:0:0" Value="Visible"/>
                                            </ObjectAnimationUsingKeyFrames>
                                            <DoubleAnimation Storyboard.TargetProperty="(UIElement.Opacity)" 
    											Storyboard.TargetName="OuterHintPanel"
    											Duration="0" To="0.0"/>
                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.IsHitTestVisible)" 
    											Storyboard.TargetName="OuterHintPanel">
                                                <DiscreteObjectKeyFrame KeyTime="0:0:0" Value="False"/>
                                            </ObjectAnimationUsingKeyFrames>
                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.IsHitTestVisible)" 
    											Storyboard.TargetName="InnerHintPanel">
                                                <DiscreteObjectKeyFrame KeyTime="0:0:0" Value="False"/>
                                            </ObjectAnimationUsingKeyFrames>
                                        </Storyboard>
                                    </VisualState>
                                </VisualStateGroup>
                            </VisualStateManager.VisualStateGroups>
                            <Grid HorizontalAlignment="Stretch">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="Auto"/>
                                </Grid.ColumnDefinitions>
                                <Grid Grid.Column="0" HorizontalAlignment="Stretch" toolkitPrimitives:ClipToBounds.IsEnabled="True">
                                    <ContentPresenter x:Name="Presenter">
                                        <ContentPresenter.RenderTransform>
                                            <CompositeTransform TranslateX="24"/>
                                        </ContentPresenter.RenderTransform>
                                    </ContentPresenter>
                                </Grid>
                                <Rectangle x:Name="InnerHintPanel" Grid.Column="0" Width="24"
    								Height="{TemplateBinding HintPanelHeight}"
    								HorizontalAlignment="Left"
    								Fill="Transparent"
    								StrokeThickness="0">
                                    <Rectangle.RenderTransform>
                                        <CompositeTransform TranslateX="24"/>
                                    </Rectangle.RenderTransform>
                                </Rectangle>
                                <ContentControl x:Name="InfoPresenter" Grid.Column="1" 
    								VerticalAlignment="Top"
    								Content="{TemplateBinding ContentInfo}"
    								ContentTemplate="{TemplateBinding ContentInfoTemplate}"/>
                            </Grid>
                            <Rectangle x:Name="OuterHintPanel" Width="24"
    							HorizontalAlignment="Left"
    							Height="{TemplateBinding HintPanelHeight}"
    							Fill="{TemplateBinding Background}"
    							StrokeThickness="0" Opacity="0.0"/>
                            <Grid x:Name="OuterCover" IsHitTestVisible="True"
    							Visibility="Collapsed" Background="Transparent"/>
                            <Canvas HorizontalAlignment="Left">
                                <CheckBox x:Name="SelectBox" VerticalAlignment="Top" Margin="12,-20,5,0" Visibility="Collapsed"
    								IsChecked="{Binding IsSelected, Mode=TwoWay, RelativeSource={RelativeSource TemplatedParent}}">
                                    <CheckBox.RenderTransform>
                                        <CompositeTransform TranslateX="-58"/>
                                    </CheckBox.RenderTransform>
                                </CheckBox>
                            </Canvas>
                        </Grid>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <Style x:Key="LongListSelectorStyleTest" TargetType="phone:LongListSelector">
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="Foreground" Value="{StaticResource PhoneForegroundBrush}"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="phone:LongListSelector">
                        <Grid Background="{TemplateBinding Background}" d:DesignWidth="480" d:DesignHeight="800">
                            <VisualStateManager.VisualStateGroups>
                                <VisualStateGroup x:Name="ScrollStates">
                                    <VisualStateGroup.Transitions>
                                        <VisualTransition GeneratedDuration="00:00:00.5"/>
                                    </VisualStateGroup.Transitions>
                                    <VisualState x:Name="Scrolling">
                                        <Storyboard>
                                            <DoubleAnimation Duration="0" To="1" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="VerticalScrollBar"/>
                                        </Storyboard>
                                    </VisualState>
                                    <VisualState x:Name="NotScrolling"/>
                                </VisualStateGroup>
                            </VisualStateManager.VisualStateGroups>
                            <Grid Margin="{TemplateBinding Padding}">
                                <ViewportControl x:Name="ViewportControl" VerticalAlignment="Top" HorizontalContentAlignment="Stretch"/>
                                <ScrollBar x:Name="VerticalScrollBar" Opacity="0" Margin="4,0,-12,0" Orientation="Vertical" HorizontalAlignment="Right"/>
                            </Grid>
                        </Grid>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <ControlTemplate x:Key="LongListMultiSelectorScrollTemp" TargetType="toolkit:LongListMultiSelector">
            <phone:LongListSelector x:Name="InnerSelector" Style="{StaticResource LongListSelectorStyleTest}"
    			GridCellSize="{TemplateBinding GridCellSize}"
    			GroupFooterTemplate="{TemplateBinding GroupFooterTemplate}"
    			GroupHeaderTemplate="{TemplateBinding GroupHeaderTemplate}"
    			HideEmptyGroups="{TemplateBinding HideEmptyGroups}"
    			IsGroupingEnabled="{TemplateBinding IsGroupingEnabled}"
    			ItemsSource="{TemplateBinding ItemsSource}"
    			JumpListStyle="{TemplateBinding JumpListStyle}"
    			ListFooter="{TemplateBinding ListFooter}"
    			ListFooterTemplate="{TemplateBinding ListFooterTemplate}"
    			ListHeader="{TemplateBinding ListHeader}"
    			ListHeaderTemplate="{TemplateBinding ListHeaderTemplate}"
                    >
                <phone:LongListSelector.ItemTemplate>
                    <DataTemplate>
                        <toolkit:LongListMultiSelectorItem Style="{StaticResource LongListMultiSelectorItemListStyle}"
    						x:Name="LLSItem"
    						HorizontalContentAlignment="Stretch"
    						VerticalAlignment="Stretch"
    						Content="{Binding}"
                                    />
                    </DataTemplate>
                </phone:LongListSelector.ItemTemplate>
            </phone:LongListSelector>
        </ControlTemplate>
    </phone:PhoneApplicationPage.Resources>

    <!--Transitions-->
    <toolkit:TransitionService.NavigationInTransition>
        <toolkit:NavigationInTransition>
            <toolkit:NavigationInTransition.Backward>
                <toolkit:TurnstileTransition Mode="BackwardIn"/>
            </toolkit:NavigationInTransition.Backward>
            <toolkit:NavigationInTransition.Forward>
                <toolkit:TurnstileTransition Mode="ForwardIn"/>
            </toolkit:NavigationInTransition.Forward>
        </toolkit:NavigationInTransition>
    </toolkit:TransitionService.NavigationInTransition>
    <toolkit:TransitionService.NavigationOutTransition>
        <toolkit:NavigationOutTransition>
            <toolkit:NavigationOutTransition.Backward>
                <toolkit:TurnstileTransition Mode="BackwardOut"/>
            </toolkit:NavigationOutTransition.Backward>
            <toolkit:NavigationOutTransition.Forward>
                <toolkit:TurnstileTransition Mode="ForwardOut"/>
            </toolkit:NavigationOutTransition.Forward>
        </toolkit:NavigationOutTransition>
    </toolkit:TransitionService.NavigationOutTransition>

    <Grid x:Name="LayoutRoot" Background="Transparent">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>
        <Grid x:Name="ContentPanel" Grid.Row="1" Background="#FFDDDFE2">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto" />
                <RowDefinition Height="*" />
            </Grid.RowDefinitions>

            <ListBox x:Name="ImageBar"
				Grid.Row="0"
				ScrollViewer.VerticalScrollBarVisibility="Disabled"
				ItemContainerStyle="{StaticResource ListBoxItemStyle}" 
				SelectedIndex="{Binding SelectedIndex, ElementName=ContentPivot, Mode=TwoWay}" Background="#FFEC3E23" Height="80">
                <ListBox.ItemsPanel>
                    <ItemsPanelTemplate>
                        <controls:SplitPanel />
                    </ItemsPanelTemplate>
                </ListBox.ItemsPanel>
                <ListBoxItem>
                    <controls:PathControl Content="F1 M 28.4814,9.42014L 48.0898,26.8631L 48.0898,48.3363C 48.0898,48.3363 48.161,49.9053 46.598,49.9053C 44.7088,49.9053 32.6854,49.9053 32.6854,49.9053L 32.7098,38.2957C 32.7098,38.2957 32.8444,36.3759 30.6414,36.3759L 24.744,36.3759C 22.8813,36.3759 23.081,38.2957 23.081,38.2957L 23.0606,49.94C 23.0606,49.94 10.3809,49.9583 8.84857,49.9583C 7.61549,49.9583 7.66662,48.6969 7.66662,48.6969L 7.66662,26.8631L 28.4814,9.42014 Z M 28.6567,0L 1.04433e-006,25.24C 1.04433e-006,25.24 1.76688,28.4975 5.62262,25.24L 28.6567,5.75283L 50.2519,25.1177C 54.7128,28.3366 56.3858,25.1177 56.3858,25.1177L 28.6567,0 Z M 49.7282,17.1364L 49.7282,5.70713L 44.1729,5.70713L 44.1953,12.4433L 49.7282,17.1364 Z" />
                </ListBoxItem>
                <ListBoxItem>
                    <controls:PathControl Content="F1 M 41.3707,28.7532C 39.9768,30.1125 38.3883,31.6531 38.1324,32.45C 37.8845,33.2496 38.2763,35.4724 38.6255,37.4314C 39.2545,41.0029 39.8569,44.3692 38.2817,45.5526C 37.9352,45.8111 37.5114,45.947 37.0156,45.9577C 35.4138,45.9844 33.0657,44.6198 30.7975,43.3084C 29.129,42.3356 27.2393,41.2428 26.4291,41.2375C 25.5922,41.2508 23.7052,42.3143 22.0447,43.2604C 19.8271,44.5211 17.5323,45.8111 15.9331,45.8431C 15.3788,45.8538 14.9097,45.7178 14.5365,45.438C 12.9747,44.2306 13.6063,40.8616 14.2727,37.3062C 14.6405,35.3498 15.0536,33.1323 14.8084,32.3247C 14.5658,31.5278 12.996,29.9713 11.61,28.5959C 9.086,26.1013 6.70589,23.7451 7.31358,21.8181C 7.92393,19.8964 11.1836,19.486 14.6325,19.0435C 16.5302,18.809 18.6784,18.5318 19.3341,18.0387C 19.9844,17.5457 20.9173,15.5093 21.7435,13.7076C 23.2281,10.4533 24.6327,7.38287 26.549,7.35352L 26.5863,7.35352C 28.5347,7.35889 29.9153,10.4639 31.3785,13.7556C 32.1861,15.568 33.0977,17.6149 33.748,18.1133C 34.3957,18.6091 36.5466,18.9076 38.4336,19.1661C 41.8878,19.6406 45.1421,20.0857 45.7338,22.018C 46.3175,23.9477 43.9188,26.2772 41.3707,28.7532 Z M 53.0501,20.2536C 52.2318,17.5883 47.7355,16.9753 42.9726,16.3143C 40.3606,15.9625 37.3941,15.5493 36.4986,14.8617C 35.6004,14.1767 34.3397,11.3461 33.2283,8.84613C 31.2053,4.30176 29.2969,0.0159912 26.6157,0L 26.5623,0C 23.9104,0.0479736 21.9754,4.28314 19.9204,8.77948C 18.7877,11.2662 17.5003,14.0834 16.5995,14.7578C 15.6906,15.4374 12.7215,15.8185 10.1068,16.149C 5.34392,16.754 0.839569,17.3218 1.19209e-007,19.9737C -0.839569,22.631 2.44674,25.8907 5.93295,29.3422C 7.84397,31.2372 10.0109,33.3802 10.352,34.489C 10.6905,35.5923 10.1148,38.6655 9.61106,41.36C 8.6862,46.2749 7.81465,50.9232 9.97354,52.5836C 10.4906,52.9754 11.1409,53.1674 11.9059,53.1514C 14.1074,53.1113 17.2738,51.3256 20.3362,49.5905C 22.6337,48.2792 25.2324,46.8053 26.3971,46.7919C 27.5139,46.7919 30.1259,48.3112 32.4313,49.6492C 35.5604,51.4642 38.8014,53.3459 41.0056,53.3086C 41.6932,53.2926 42.2823,53.106 42.7594,52.7515C 44.9316,51.1177 44.108,46.4668 43.2311,41.5386C 42.7567,38.8307 42.213,35.7603 42.5568,34.6569C 42.906,33.5534 45.0968,31.4291 47.0265,29.5501C 50.542,26.1359 53.863,22.9189 53.0501,20.2536 Z" />
                </ListBoxItem>
                <ListBoxItem>
                    <controls:PathControl Content="F1 M 51.1955,30.4907L 51.1955,49.1544C 51.1955,49.6025 50.8295,49.9583 50.3895,49.9583L 0.80184,49.9583C 0.361817,49.9583 1.18271e-006,49.6025 1.18271e-006,49.1544L 1.18271e-006,30.7741C 1.18271e-006,30.6716 0.0220234,30.5751 0.0541284,30.4868L 6.44765,4.56036C 6.56619,4.25185 6.86359,4.04583 7.19721,4.04583L 17.5481,4.04583L 12.8531,9.37593L 11.398,9.37593L 7.4485,30.125L 16.4105,30.125C 16.8528,30.125 17.2144,30.5067 17.2144,30.9731L 17.2144,37.2197C 17.2144,38.3874 18.1169,39.3381 19.2244,39.3381L 31.969,39.3381C 33.0765,39.3381 33.9788,38.3874 33.9788,37.2197L 33.9788,30.9731C 33.9788,30.5067 34.3385,30.125 34.7847,30.125L 43.8394,30.125L 40.2858,9.37593L 38.6258,9.37593L 33.6915,4.04583L 44.1831,4.04583C 44.5146,4.04583 44.8141,4.25185 44.9326,4.56036L 51.1372,30.1933C 51.1732,30.2857 51.1955,30.3882 51.1955,30.4907 Z M 31.8604,33.5015L 31.8604,13.5304L 37.9684,13.5304L 25.4469,2.54437e-006L 13.225,13.8731L 19.337,13.8731L 19.337,33.5015L 31.8604,33.5015 Z" />
                </ListBoxItem>
            </ListBox>

            <Grid Grid.Row="1" Height="10" VerticalAlignment="Top" Canvas.ZIndex="1">
                <Grid.Background>
                    <LinearGradientBrush EndPoint="0.5,1" StartPoint="0.5,0">
                        <GradientStop Color="#FF7C7C7C" Offset="0"/>
                        <GradientStop Color="Transparent" Offset="1"/>
                    </LinearGradientBrush>
                </Grid.Background>
            </Grid>

            <phone:Pivot x:Name="ContentPivot"
				Grid.Row="1" SelectionChanged="Panorama_OnSelectionChanged">
                <phone:PivotItem Margin="0,-10,0,0" Tag="LiveRayz">
                    <Grid VerticalAlignment="Top">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition/>
                        </Grid.RowDefinitions>

                        <StackPanel Grid.Row="0" x:Name="LoadingBarsSp" Margin="0,10,0,10" Visibility="Collapsed">
                            <ProgressBar VerticalAlignment="Top" IsIndeterminate="True" Foreground="#EC3E23"/>
                            <TextBlock  HorizontalAlignment="Center" Text="Loading..." Foreground="#FF444444" FontSize="16"/>
                        </StackPanel>

                        <phone:LongListSelector Grid.Row="1" x:Name="LiveRayzList" ItemTemplate="{StaticResource LiveRayzItemsTemplate}" ItemsSource="{Binding LiveRayz}" Margin="12,0,0,0"/>

                    </Grid>
                </phone:PivotItem>
                <phone:PivotItem Margin="0,-10,0,0" Tag="StarredRayz">
                    <Grid VerticalAlignment="Top" MinHeight="200">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition/>
                        </Grid.RowDefinitions>

                        <StackPanel Grid.Row="0" x:Name="LoadingBarsSpS" Margin="0,10,0,10" Visibility="Collapsed">
                            <ProgressBar VerticalAlignment="Top" IsIndeterminate="True" Foreground="#EC3E23"/>
                            <TextBlock HorizontalAlignment="Center" Text="Loading..." Foreground="#FF444444" FontSize="16"/>
                        </StackPanel>

                        <Grid x:Name="NoStarredGrid" Grid.Row="1" Visibility="Collapsed" Margin="0,20,0,0">
                            <StackPanel Orientation="Vertical">
                                <TextBlock Margin="12,0,12,20" FontSize="40" Text="It's lonely here :(" Foreground="#CC515050"/>
                                <TextBlock Margin="12,0,12,0" FontSize="30" Text="Star some rayz to engage." TextWrapping="Wrap" Foreground="#99515050"/>
                            </StackPanel>
                        </Grid>

                        <toolkit:LongListMultiSelector Grid.Row="1" x:Name="StarredRayzList" ItemTemplate="{StaticResource StarredRayzItemsTemplate}"
							Margin="-12,0,12,0" ItemsSource="{Binding StarredRayz}" IsSelectionEnabledChanged="StarredRayzList_IsSelectionEnabledChanged" ItemContainerStyle="{StaticResource LongListMultiSelectorItemStyleGrey}" SelectionChanged="StarredRayzList_SelectionChanged" Template="{StaticResource LongListMultiSelectorScrollTemp}"/>
                    </Grid>
                </phone:PivotItem>
                <phone:PivotItem Margin="0,-10,0,0" Tag="MyRayz">
                    <Grid VerticalAlignment="Top" MinHeight="200">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition/>
                        </Grid.RowDefinitions>

                        <StackPanel Grid.Row="0" x:Name="LoadingBarsSpM" Margin="0,10,0,10" Visibility="Collapsed">
                            <ProgressBar VerticalAlignment="Top" IsIndeterminate="True" Foreground="#EC3E23"/>
                            <TextBlock HorizontalAlignment="Center" Text="Loading..." Foreground="#FF444444" FontSize="16"/>
                        </StackPanel>

                        <Grid x:Name="NoMyGrid" Grid.Row="1" Visibility="Collapsed" Margin="0,20,0,0">
                            <StackPanel Orientation="Vertical">
                                <TextBlock Margin="12,0,12,20" FontSize="40" Text="It's lonely here :(" Foreground="#CC515050"/>

                                <TextBlock Margin="12,0,12,0" FontSize="30" Text="Send some rayz, don't be shy!" TextWrapping="Wrap" Foreground="#99515050"/>
                            </StackPanel>
                        </Grid>

                        <toolkit:LongListMultiSelector Grid.Row="1" VerticalAlignment="Stretch" x:Name="MyRayzList" ItemTemplate="{StaticResource MyRayzItemsTemplate}" Margin="-12,0,12,0" ItemsSource="{Binding MyRayz}" IsSelectionEnabledChanged="MyRayzList_IsSelectionEnabledChanged" ItemContainerStyle="{StaticResource LongListMultiSelectorItemStyleGrey}" SelectionChanged="MyRayzList_SelectionChanged" Template="{StaticResource LongListMultiSelectorScrollTemp}"/>

                    </Grid>
                </phone:PivotItem>
            </phone:Pivot>
        </Grid>
    </Grid>

</phone:PhoneApplicationPage>